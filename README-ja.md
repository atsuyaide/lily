# Lily

Lily は PowerShell をベースとした軽量な CLI ツールです.
PowerShell を利用するため基本機能を利用するために別のソフトウェアをインストールする必要はありません.

日々行っている退屈な作業(特定の Web ページやフォルダを開くなど)をコマンドを実行することで代替できます.
CLI で実行するためあなたがマウスを操作するよりも圧倒的に高速にその作業が完了します.
また, もしもあなたが任意のプログラミング言語で if, for 文を使えるなら, Lily はより強力なツールとなるでしょう.

## Setup

Lily のセットアップはとても簡単です.
このリポジトリをダウンロードし, `setup.ps1`を実行するだけで完了します.

### Download

ソースファイルをすべてダウンロードし, Zip ファイルを展開します.
ダウンロードは[こちら](https://github.com/atsuyaide/lily/archive/refs/heads/main.zip)をクリックします.
ダウンロードが完了したら, 任意の場所に Zip ファイルを展開してください.

### `setup.ps1`を実行

プロジェクトフォルダ内に`setup.ps1`があることを確認します.
ファイルエクスプローラーを利用している場合はファイルを選択し右クリック, `PowerShell で実行`をクリックします.
`setup.ps1`と同じフォルダに`Lily.lnk`が作成されます.

これは Lily の起動用ショートカットで, ダブルクリックすることで Lily を起動できます.

### 使ってみよう!

Lily が起動できたならば, `google`と入力し実行してください.
Microsoft Edge で Google 検索のページが起動したはずです.

このように Lily ではコマンドで特定の Web ページやフォルダを簡単に開くことができます.
また設定ファイルを書き換えることで利用する Web ブラウザを変更したり, 開くことのできる Web ページを簡単に追加することもできます.

## Lily の内部構造

このセクションでは Lily を構成する内部構造を説明します.

### 環境変数

| 変数名              | 説明                                                  |
| :------------------ | :---------------------------------------------------- |
| $Env:\_ROOT         | Lily のソースファイルがあるフォルダ                   |
| $Env:\_SRC          | Lily 実行可能なコマンドの保存場所                     |
| $Env:\_VERSION      | Lily のバージョン                                     |
| $Env:HOME           | Lily 起動時のフォルダ. デフォルトは`$Env:USERPROFILE` |
| $Env:DefaultBrowser | EXE ファイルパス. デフォルトは Microsoft Edge         |

### 設定ファイル

| ファイル名     | 説明                                                          |
| :------------- | :------------------------------------------------------------ |
| `.lilyrc`      | 起動時に読み込まれる設定ファイル(PowerShell の構文で記載可能) |
| `alias.txt`    | 起動時に読み込まれるエイリアスファイル                        |
| `bookmark.txt` | `binit`コマンドで開くページの一覧                             |

`.lilyrc`と`alias.txt`は Lily は起動時に`$Env:_ROOT` -> `$Env:USERPROFILE`配下を順番に, `bookmark.txt`はどちらかのみを読み込みます.
読み込む優先度は`$Env:USEPROFILE` -> `$Env:_ROOT`の順番です.

### コマンドとエイリアス

Lily ではデフォルトの PowerShell 関連のコマンドに加えて様々なコマンド(例: `manual`, `google`, `lily`, ...)を実行可能です.
これらの Lily 特有のコマンドはコマンドとエイリアスに分類できます.
`manual`コマンドではコマンドとエイリアスに分けて一覧を表示します.

#### コマンド

実態は`.ps1`ファイルです.
`$Env:_SRC`に`.ps1`ファイルを配置することで Lily から呼び出し可能になります.

#### エイリアス

実態は[doskey](https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/doskey)のマクロ設定です.
`alias.txt`を`/macrofile`オプションで読み込むことで Lily から呼び出し可能になっています.

## Tutorial

Lily はいくつかの環境変数と設定ファイルを持っています.
これらを適切に設定することで, 高度なカスタマイズが可能です.

まずは事前準備として`lily init`を実行してください.
ファイルを保存するか聞かれるため, 上書きしたくないなどの事情がなければ全て Enter で完了してください.

### 起動時の設定を追加する

このセクションでは以下のような要望に対応できます.

- 起動時のディレクトリを変更したい
- デフォルトのブラウザを変更したい

### コマンドを追加する

### エイリアスを追加する

### 他ソフトウェア(Git, Python, ...)を利用可能にする
